
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>📅 مفكرة مواعيدي | Amani HR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <style>
    body { font-family: 'Tajawal', sans-serif; background-color: #f4f4f4; text-align: center; padding: 20px; }
    #calendar { margin-top: 20px; }
    button { margin-top: 20px; font-size: 16px; padding: 10px 20px; }
  </style>
</head>
<body>

<h1>📅 مفكرة مواعيدي</h1>
<p>اضغط الزر أدناه لتصدير المواعيد إلى ملف PDF</p>

<button onclick="generatePDF()">📄 تصدير PDF</button>

<script>
  async function generatePDF() {
    const {{ jsPDF }} = window.jspdf;
    const doc = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });

    const headers = [["التاريخ", "عنوان الموعد", "ملاحظات"]];
    const data = [];

    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (!/^\d{4}-\d{2}-\d{2}$/.test(key)) continue;
      const item = JSON.parse(localStorage.getItem(key));
      if (item && item.title) {
        data.push([key, item.title, item.notes || ""]);
      }
    }

    doc.setFont("helvetica", "bold");
    doc.setFontSize(18);
    doc.text("مفكرة مواعيدي", 105, 15, { align: "center" });

    doc.autoTable({
      head: headers,
      body: data,
      startY: 25,
      styles: { font: 'helvetica', fontStyle: 'normal', halign: 'right' },
      headStyles: { fillColor: [0, 102, 204], textColor: 255 },
      margin: { top: 10, left: 10, right: 10 }
    });

    doc.save("مفكرة_مواعيدي.pdf");
  }
</script>

</body>
</html>
