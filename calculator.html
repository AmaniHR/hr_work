
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ุญุงุณุจุฉ ูุนุงููุฑ ุงูุชุฑููุฉ | Amani HR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Tajawal', sans-serif; background-color: #f8f9fa; padding: 20px; }
    .section-box { background-color: white; border-radius: 10px; padding: 20px; margin-bottom: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    h2 { color: #0d47a1; font-size: 20px; margin-bottom: 15px; }
    label { font-weight: bold; margin-top: 10px; }
    .result { margin-top: 10px; font-weight: bold; color: #0d47a1; }
    .total-result { background-color: #e3f2fd; padding: 20px; font-size: 22px; font-weight: bold; text-align: center; border-radius: 10px; }
    .form-text { font-size: 14px; color: #777; }
  </style>
</head>
<body>

<div class="container" style="max-width: 850px;">
  <h1 class="text-center text-primary mb-4">๐ ุญุงุณุจุฉ ูุนุงููุฑ ุงูุชุฑููุฉ</h1>

  <!-- ุงููุนูุงุฑ ุงูุฃูู -->
  <div class="section-box">
    <h2>ุงููุนูุงุฑ ุงูุฃูู: ุชูููู ุงูุฃุฏุงุก ุงููุธููู (30%)</h2>
    <label for="performanceRating">ุงุฎุชุฑ ุชูุฏูุฑ ุงูุฃุฏุงุก:</label>
    <select id="performanceRating" class="form-select">
      <option value="100">ููุชุงุฒ (100%)</option>
      <option value="75">ุฌูุฏ ุฌุฏูุง (75%)</option>
      <option value="60">ุฌูุฏ (60%)</option>
    </select>
    <div class="result">ุงููุชูุฌุฉ: <span id="performanceResult">0%</span></div>
  </div>

  <!-- ุงููุนูุงุฑ ุงูุซุงูู -->
  <div class="section-box">
    <h2>ุงููุนูุงุฑ ุงูุซุงูู: ุจุฑุงูุฌ ุงูุชุฏุฑูุจ ูุงูุชุทููุฑ (40%)</h2>
    <label for="certifiedPrograms">1. ุจุฑุงูุฌ ุงุนุชูุงุฏ ููุชููุฉ ุจุงุฎุชุจุงุฑ ุงุฌุชูุงุฒ:</label>
    <select id="certifiedPrograms" class="form-select">
      <option value="0">ูุง ููุฌุฏ</option>
      <option value="80">ุฏููู (80%)</option>
      <option value="60">ุญูููู (60%)</option>
      <option value="40">ุฎุงุต (40%)</option>
    </select>
    <label for="trainingPrograms">2. ุจุฑุงูุฌ ุชุฏุฑูุจ ุจุฏูู ุงุฎุชุจุงุฑ ุงุฌุชูุงุฒ:</label>
    <select id="trainingPrograms" class="form-select">
      <option value="0">ูุง ููุฌุฏ</option>
      <option value="15">ุจุฑูุงูุฌ ุญูููู ูุงุญุฏ (15%)</option>
      <option value="30">ุจุฑูุงูุฌูู ุญูููููู (30%)</option>
      <option value="20">ุจุฑูุงูุฌ ุฏููู ูุงุญุฏ (20%)</option>
      <option value="40">ุจุฑูุงูุฌูู ุฏููููู (40%)</option>
      <option value="35">ุจุฑูุงูุฌ ุญูููู + ุฏููู (35%)</option>
    </select>
    <label for="selfLearning">3. ุจุฑุงูุฌ ุงูุชุนููู ุงูุฐุงุชู (ุจุญุฏ ุฃูุตู 20):</label>
    <input type="number" id="selfLearning" class="form-control" value="0" min="0" max="20">
    <div class="form-text">ูู ุจุฑูุงูุฌ = 0.05% ูู ูุฒู ุงููุนูุงุฑ</div>
    <label for="onJobTraining">4. ุงูุชุฏุฑูุจ ุนูู ุฑุฃุณ ุงูุนูู:</label>
    <select id="onJobTraining" class="form-select">
      <option value="0">ูุง ููุฌุฏ</option>
      <option value="50">ุจุชูุฏูุฑ ููุชุงุฒ (50%)</option>
      <option value="25">ุจุชูุฏูุฑ ุฌูุฏ ุฌุฏูุง (25%)</option>
    </select>
    <div class="result">ุงููุชูุฌุฉ: <span id="developmentResult">0%</span></div>
  </div>

  <!-- ุงููุนูุงุฑ ุงูุซุงูุซ -->
  <div class="section-box">
    <h2>ุงููุนูุงุฑ ุงูุซุงูุซ: ุงุฎุชุจุงุฑ ุงููุฏุฑุฉ ุงููุนุฑููุฉ (30%)</h2>
    <label for="examScore">ุฏุฑุฌุฉ ุงูุงุฎุชุจุงุฑ (0 - 100):</label>
    <input type="number" id="examScore" class="form-control" value="50" min="0" max="100">
    <div class="form-text">ุฅุฐุง ูุงูุช ุงูุฏุฑุฌุฉ ุฃูู ูู 50 = ูุง ุชูุญุชุณุจ</div>
    <div class="result">ุงููุชูุฌุฉ: <span id="examResult">0%</span></div>
  </div>

  <!-- ุงููุชูุฌุฉ ุงูููุงุฆูุฉ -->
  <div class="section-box total-result">
    ุงููุชูุฌุฉ ุงูููุงุฆูุฉ: <span id="totalScore">0%</span>
  </div>

  <div class="text-center mt-4">
    <button class="btn btn-primary" onclick="calculate()">ุงุญุณุจ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</button>
    <button id="downloadBtn" class="btn btn-outline-secondary ms-3">๐ ุชุญููู ุงููุชูุฌุฉ PDF</button>
  </div>
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    calculate();
    ["performanceRating", "certifiedPrograms", "trainingPrograms", "selfLearning", "onJobTraining", "examScore"].forEach(id => {
      const el = document.getElementById(id);
      el.addEventListener("change", calculate);
      el.addEventListener("input", calculate);
    });
  });
  
  function calculate() {
    console.log("recalculating...");
    const performance = parseFloat(document.getElementById("performanceRating").value);
    const certified = parseFloat(document.getElementById("certifiedPrograms").value);
    const training = parseFloat(document.getElementById("trainingPrograms").value);
    const selfLearn = Math.min(parseInt(document.getElementById("selfLearning").value), 20) * 0.05;
    const onJob = parseFloat(document.getElementById("onJobTraining").value);
    const exam = parseFloat(document.getElementById("examScore").value);

    const weight1 = 30, weight2 = 40, weight3 = 30;
    const score1 = (performance / 100) * weight1;
    const totalDev = Math.min(certified + training + selfLearn + onJob, 100);
    const score2 = (totalDev / 100) * weight2;
    const score3 = exam >= 50 ? (exam / 100) * weight3 : 0;

    document.getElementById("performanceResult").textContent = score1.toFixed(2) + "%";
    document.getElementById("developmentResult").textContent = score2.toFixed(2) + "%";
    document.getElementById("examResult").textContent = score3.toFixed(2) + "%";
    document.getElementById("totalScore").textContent = (score1 + score2 + score3).toFixed(2) + "%";
  }

  ["performanceRating", "certifiedPrograms", "trainingPrograms", "selfLearning", "onJobTraining", "examScore"].forEach(id => {
    document.getElementById(id).addEventListener("change", calculate);
    document.getElementById(id).addEventListener("input", calculate);
  });

  document.getElementById("downloadBtn").addEventListener("click", async () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const performance = document.getElementById("performanceResult").textContent.trim();
    const development = document.getElementById("developmentResult").textContent.trim();
    const exam = document.getElementById("examResult").textContent.trim();
    const total = document.getElementById("totalScore").textContent.trim();

    let y = 20;
    doc.setFont("helvetica", "bold");
    doc.setFontSize(16);
    doc.text("ุชูุฑูุฑ ุญุงุณุจุฉ ุงูุชุฑููุฉ", 105, y, { align: "center" });
    y += 10;

    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);
    doc.text(`ุงูุชุงุฑูุฎ: ${new Date().toLocaleString("ar-EG")}`, 20, y, { align: "right" }); y += 10;
    doc.text(`ุชูููู ุงูุฃุฏุงุก ุงููุธููู: ${performance}`, 20, y, { align: "right" }); y += 8;
    doc.text(`ุจุฑุงูุฌ ุงูุชุฏุฑูุจ ูุงูุชุทููุฑ: ${development}`, 20, y, { align: "right" }); y += 8;
    doc.text(`ุงุฎุชุจุงุฑ ุงููุฏุฑุฉ ุงููุนุฑููุฉ: ${exam}`, 20, y, { align: "right" }); y += 10;

    doc.setFont("helvetica", "bold");
    doc.setTextColor(33, 94, 148);
    doc.text(`ุงููุชูุฌุฉ ุงูููุงุฆูุฉ: ${total}`, 20, y, { align: "right" }); y += 15;

    doc.setFont("helvetica", "italic");
    doc.setFontSize(10);
    doc.setTextColor(0, 0, 0);
    doc.text("ุชู ุชูููุฏ ูุฐุง ุงูุชูุฑูุฑ ูู ุญุงุณุจุฉ Amani HR", 105, y, { align: "center" });

    doc.save("ุชูุฑูุฑ-ุงูุชุฑููุฉ.pdf");
  });
</script>

</body>
</html>
